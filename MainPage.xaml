<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PictureYOLO.MainPage"
             xmlns:skia="clr-namespace:SkiaSharp.Views.Maui.Controls;assembly=SkiaSharp.Views.Maui.Controls"
             Title="试纸条检测工具">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="30">
            <!-- 图片显示区域 -->
            <Frame BorderColor="Gray" CornerRadius="10">
                <Image x:Name="selectedImage"
                       HeightRequest="150"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       BackgroundColor="LightGray"/>
            </Frame>

            <!-- 状态标签 -->
            <Label x:Name="statusLabel" 
                   Text="-----" 
                   HorizontalOptions="Center"
                   FontAttributes="Italic"/>

            <Grid RowDefinitions="Auto,Auto" RowSpacing="15" ColumnSpacing="15" Padding="10">
                <Button Text="打开图片" 
                    Clicked="OnPickImageClicked"
                    BackgroundColor="#512BD4"
                    TextColor="White"
                    CornerRadius="10"
                    Grid.Row="0"/>
                <Grid ColumnDefinitions="*,*,*" 
                    ColumnSpacing="10"
                    Grid.Row="1"
                    HorizontalOptions="FillAndExpand">

                    <Button x:Name="PreButton"
                            Text="上一张" 
                            Clicked="PreButton_Clicked"
                            BackgroundColor="Green"
                            TextColor="White"
                            CornerRadius="10"
                            IsEnabled="False"
                            Grid.Column="0"/>
                    <!-- 第一列 -->

                    <Button x:Name="SaveButton"
                            Text="Save" 
                            Clicked="SaveButton_Clicked"
                            BackgroundColor="Blue"
                            TextColor="White"
                            CornerRadius="10"
                            Grid.Column="1"/>
                    <!-- 第二列 -->

                    <Button x:Name="NextButton"
                            Clicked="NextButton_Clicked"
                            Text="下一张" 
                            IsEnabled="False"
                            BackgroundColor="Green"
                            TextColor="White"
                            CornerRadius="10"
                            Grid.Column="2"/>
                    <!-- 第三列 -->
                </Grid>
            </Grid>


            <Frame x:Name="resultFrame" 
                   CornerRadius="10"
                   BackgroundColor="#E8F5E9"
                   IsVisible="False">
                    <skia:SKCanvasView x:Name="waveformCanvas"
                                       HeightRequest="150"
                                       PaintSurface="OnWaveformPaintSurface"
                                       Touch="waveformCanvas_Touch"
                                       EnableTouchEvents="True"/>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>